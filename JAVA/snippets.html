<!DOCTYPE html>
<html>	
<head>
    <link rel="stylesheet" href="../stylesheet.css">

    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../script.js"></script>
    <title>Java Snippets</title>
</head>
<body>
    <div id="background" style="padding-top: 200px; padding-left:100px;"><img src="java_logo1.png" /></div>
    <div id="textBackground"></div>
    <div id="container">
    <div class="content-div">
        <h1 style="text-align:center;">Java Snippets</h1>
        <div class="space"></div>
		<p>
			This is a small collection of Java code that I have saved for future reference and
			guidance. These were assembled mainly from assignments during my schooling that 
			were assigned to demonstrate various aspects such as; multi-threading, concurrent
			memory access, networking protocols, and communication between processes.
		</p>
        <a name="FibNonRecur"></a>
		<h1>Fibonacci Sequence - Non-Recursive</h1>
		<p>
			This small program is used to demonstrate access to a shared data structure across multiple threads. 
			The threads are executed in a sequential fashion so concurrency is not an issue. The program calculates
			the fibonacci sequence up to a specified index. This allows for a very fast fibonacci sequence generator,
            however, type long is used for the storage so the program will 'overflow' this type with a large requested
            sequence.
		</p> 
		<h2>Execution</h2>
		<p>
			The program is executed
			from the command line and expects a command line argument which specifies the count of fibonacci sequence
			to which the program will calculate. If no argument is provided, the user is prompted for input which
			will be parsed and used as the count. The program then creates an array of type long which will act as the
			shared memory object. We then create a thread for each fibonacci sequence index; passing this number to the
			created 'worker' object. Each thread will look at the shared memory object and calculate its index based
			on the previous threads' work. We then output the array to the user. 
		</p>
		<div class="codeBoxN">			
<p>
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">util</span><span class="style_10">.</span><span class="style_11">Arrays</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">util</span><span class="style_10">.</span><span class="style_11">Scanner</span><span class="style_10">;</span><br />
<br />
<span class="style_5">public&nbsp;class&nbsp;</span><span class="style_19">FibNonRecur&nbsp;</span><br />
<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//private&nbsp;class&nbsp;to&nbsp;handle&nbsp;the&nbsp;'work'&nbsp;of&nbsp;the&nbsp;Fib&nbsp;Threads.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;static&nbsp;class&nbsp;</span><span class="style_19">FibWorker&nbsp;</span><span class="style_5">extends&nbsp;</span><span class="style_19">FibNonRecur&nbsp;</span><span class="style_5">implements&nbsp;</span><span class="style_11">Runnable</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//the&nbsp;assigned&nbsp;index</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;final&nbsp;</span><span class="style_16">int&nbsp;</span><span class="style_11">arrayIndex</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_19">FibWorker</span><span class="style_10">(</span><span class="style_16">int&nbsp;</span><span class="style_11">index</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">this</span><span class="style_10">.</span><span class="style_11">arrayIndex&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">index</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">@Override</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">run</span><span class="style_10">()&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//access&nbsp;the&nbsp;shared&nbsp;array&nbsp;and&nbsp;calculate&nbsp;the&nbsp;proper&nbsp;value.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibArray</span><span class="style_10">[</span><span class="style_11">arrayIndex</span><span class="style_10">]&nbsp;=&nbsp;</span><span class="style_11">fibArray</span><span class="style_10">[</span><span class="style_11">arrayIndex</span><span class="style_10">-</span><span class="style_4">1</span><span class="style_10">]&nbsp;+&nbsp;</span><span class="style_11">fibArray</span><span class="style_10">[</span><span class="style_11">arrayIndex</span><span class="style_10">-</span><span class="style_4">2</span><span class="style_10">];</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//shared&nbsp;array&nbsp;of&nbsp;fib&nbsp;values&nbsp;calculated&nbsp;by&nbsp;the&nbsp;Threads</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;static&nbsp;</span><span class="style_16">long</span><span class="style_10">[]&nbsp;</span><span class="style_11">fibArray</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;static&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">main</span><span class="style_10">(</span><span class="style_11">String</span><span class="style_10">[]&nbsp;</span><span class="style_11">args</span><span class="style_10">)&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">int&nbsp;</span><span class="style_11">fibCount&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_4">0</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//parse&nbsp;the&nbsp;command&nbsp;line&nbsp;args&nbsp;for&nbsp;fib.&nbsp;count</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">args</span><span class="style_10">.</span><span class="style_11">length&nbsp;</span><span class="style_10">&gt;&nbsp;</span><span class="style_4">0</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibCount&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">Integer</span><span class="style_10">.</span><span class="style_11">parseInt</span><span class="style_10">(</span><span class="style_11">args</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">]);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//no&nbsp;args,&nbsp;ask&nbsp;user</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">Scanner&nbsp;input&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">Scanner</span><span class="style_10">(</span><span class="style_11">System</span><span class="style_10">.</span><span class="style_11">in</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">(</span><span class="style_6">"Enter&nbsp;number&nbsp;of&nbsp;Fibanocci&nbsp;sequence:&nbsp;"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibCount&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">input</span><span class="style_10">.</span><span class="style_11">nextInt</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//if&nbsp;small&nbsp;enough,&nbsp;just&nbsp;print&nbsp;to&nbsp;screen</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">fibCount&nbsp;</span><span class="style_10">&lt;&nbsp;</span><span class="style_4">2</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibArray&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_16">long</span><span class="style_10">[]{</span><span class="style_4">0</span><span class="style_10">,</span><span class="style_4">1</span><span class="style_10">};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">Arrays</span><span class="style_10">.</span><span class="style_11">toString</span><span class="style_10">(</span><span class="style_11">fibArray</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//open&nbsp;the&nbsp;array&nbsp;to&nbsp;atleast&nbsp;what&nbsp;user&nbsp;requested</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibArray&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_16">long</span><span class="style_10">[</span><span class="style_11">fibCount</span><span class="style_10">];</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//start&nbsp;the&nbsp;array</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibArray</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">]&nbsp;=&nbsp;</span><span class="style_4">0</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibArray</span><span class="style_10">[</span><span class="style_4">1</span><span class="style_10">]&nbsp;=&nbsp;</span><span class="style_4">1</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//create&nbsp;the&nbsp;Threads&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">for</span><span class="style_10">(</span><span class="style_16">int&nbsp;</span><span class="style_11">i</span><span class="style_10">=</span><span class="style_4">2</span><span class="style_10">;&nbsp;</span><span class="style_11">i&nbsp;</span><span class="style_10">&lt;&nbsp;</span><span class="style_11">fibCount</span><span class="style_10">;&nbsp;</span><span class="style_11">i</span><span class="style_10">++)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">Thread&nbsp;fibThread&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">Thread</span><span class="style_10">(</span><span class="style_5">new&nbsp;</span><span class="style_19">FibWorker</span><span class="style_10">(</span><span class="style_11">i</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//start&nbsp;the&nbsp;threads</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibThread</span><span class="style_10">.</span><span class="style_11">start</span><span class="style_10">();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//join&nbsp;them&nbsp;together&nbsp;to&nbsp;synchronize</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">fibThread</span><span class="style_10">.</span><span class="style_11">join</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">InterruptedException&nbsp;ex</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">ex</span><span class="style_10">.</span><span class="style_11">toString</span><span class="style_10">());</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//output&nbsp;the&nbsp;computed&nbsp;fib&nbsp;sequence.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">Arrays</span><span class="style_10">.</span><span class="style_11">toString</span><span class="style_10">(</span><span class="style_11">fibArray</span><span class="style_10">));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
<span class="style_10">}</span><br />
</p>
<div class="caption">A test run of this program with an input sequence of '25' would look like this:
                     <p> Enter number of Fibanocci sequence: 25 </p>
<p>[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 
233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368]
</p>
</div></div>
<div class="space"></div>

    <a name="JavaShell"></a>
	<h1>Java Shell</h1>
	<p>
		This is a small program that captures the user input and echoes it to the command line
		of the current system. This demonstrates Java's capability of interacting with the shell
		of the operating system and launching other applications or gathering information from
		the command line.
	</p>
	<h2>Execution</h2>
	<p>
		The program is executed via the command line and is put within a while(true) loop. This 
		loop will be exited when the user inputs the command 'exit', this command is case-insensitive.
		If the 'exit' command is not entered the program will forward the input to the shell of the 
		operating system. Any errors that are returned from the operating system are displayed to the
		user; also any error within the Java ProcessBuilder is also displayed to the user via a catch
		block. The program also has the ability to change working directory, which will allow the user
		to navigate across file systems.
	</p>
	<div class="codeBoxN">
		<p><span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">io</span><span class="style_10">.*;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">util</span><span class="style_10">.</span><span class="style_11">ArrayList</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">util</span><span class="style_10">.</span><span class="style_11">Arrays</span><span class="style_10">;</span><br />
<br />
<span class="style_5">public&nbsp;class&nbsp;</span><span class="style_19">JavaShell&nbsp;</span><br />
<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//exit&nbsp;string&nbsp;for&nbsp;user&nbsp;to&nbsp;enter</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;static&nbsp;final&nbsp;</span><span class="style_11">String&nbsp;exitString&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_6">"exit"</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;static&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">main</span><span class="style_10">(</span><span class="style_11">String</span><span class="style_10">[]&nbsp;</span><span class="style_11">args</span><span class="style_10">)&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//get&nbsp;our&nbsp;System&nbsp;input&nbsp;stream</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">BufferedReader&nbsp;inputReader&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">BufferedReader</span><span class="style_10">(</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">new&nbsp;</span><span class="style_11">InputStreamReader</span><span class="style_10">(</span><span class="style_11">System</span><span class="style_10">.</span><span class="style_11">in</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">ProcessBuilder&nbsp;sendCommands&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">ProcessBuilder</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">ArrayList</span><span class="style_10">&lt;</span><span class="style_11">String</span><span class="style_10">&gt;&nbsp;</span><span class="style_11">commands&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">ArrayList</span><span class="style_10">&lt;</span><span class="style_11">String</span><span class="style_10">&gt;();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">while</span><span class="style_10">(</span><span class="style_5">true</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//prompt&nbsp;user</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">(</span><span class="style_6">"JavaShell:&nbsp;\n"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//place&nbsp;for&nbsp;user&nbsp;input</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">String&nbsp;inputString&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">inputReader</span><span class="style_10">.</span><span class="style_11">readLine</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//check&nbsp;user&nbsp;input&nbsp;for&nbsp;conditions....</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">inputString</span><span class="style_10">.</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">""</span><span class="style_10">))</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//if&nbsp;user&nbsp;hits&nbsp;'enter'&nbsp;without&nbsp;input,&nbsp;continue</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">continue</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">inputString</span><span class="style_10">.</span><span class="style_11">equalsIgnoreCase</span><span class="style_10">(</span><span class="style_11">exitString</span><span class="style_10">))</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//if&nbsp;user&nbsp;enters&nbsp;the&nbsp;exit&nbsp;string,&nbsp;close&nbsp;stream&nbsp;and&nbsp;exit</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">inputReader</span><span class="style_10">.</span><span class="style_11">close</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">break</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//parse&nbsp;the&nbsp;input&nbsp;string&nbsp;for&nbsp;our&nbsp;commands</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">String</span><span class="style_10">[]&nbsp;</span><span class="style_11">splitInputString&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">inputString</span><span class="style_10">.</span><span class="style_11">split</span><span class="style_10">(</span><span class="style_6">"&nbsp;"</span><span class="style_10">);&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//check&nbsp;for&nbsp;special&nbsp;commands&nbsp;used</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">((</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"!!"</span><span class="style_10">)&nbsp;||&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"!"</span><span class="style_10">)&nbsp;||</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"history"</span><span class="style_10">))&nbsp;&amp;&amp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">size</span><span class="style_10">()&nbsp;&gt;&nbsp;</span><span class="style_4">0</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//get&nbsp;the&nbsp;oldest&nbsp;command&nbsp;entered</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"!!"</span><span class="style_10">))</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">splitInputString&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">get</span><span class="style_10">(</span><span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">size</span><span class="style_10">()-</span><span class="style_4">1</span><span class="style_10">).</span><span class="style_11">split</span><span class="style_10">(</span><span class="style_6">"&nbsp;"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//get&nbsp;the&nbsp;previous&nbsp;command&nbsp;entered</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">else&nbsp;if</span><span class="style_10">(</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"!"</span><span class="style_10">))</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">int&nbsp;</span><span class="style_11">index&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">Integer</span><span class="style_10">.</span><span class="style_11">parseInt</span><span class="style_10">(</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">1</span><span class="style_10">]);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">splitInputString&nbsp;</span><span class="style_10">=&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">get</span><span class="style_10">(</span><span class="style_11">index</span><span class="style_10">).</span><span class="style_11">split</span><span class="style_10">(</span><span class="style_6">"&nbsp;"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//print&nbsp;all&nbsp;of&nbsp;the&nbsp;previous&nbsp;commands&nbsp;entered&nbsp;and&nbsp;go&nbsp;back</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">Arrays</span><span class="style_10">.</span><span class="style_11">toString</span><span class="style_10">(</span><span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">toArray</span><span class="style_10">()));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">continue</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//check&nbsp;if&nbsp;user&nbsp;wishes&nbsp;to&nbsp;change&nbsp;directory</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">0</span><span class="style_10">].</span><span class="style_11">equals</span><span class="style_10">(</span><span class="style_6">"cd"</span><span class="style_10">)&nbsp;&amp;&amp;&nbsp;(</span><span class="style_11">splitInputString</span><span class="style_10">.</span><span class="style_11">length&nbsp;</span><span class="style_10">&gt;&nbsp;</span><span class="style_4">1</span><span class="style_10">))</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">(</span><span class="style_6">"Changing&nbsp;Directory..."</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">String&nbsp;directory&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">splitInputString</span><span class="style_10">[</span><span class="style_4">1</span><span class="style_10">];</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">(</span><span class="style_11">directory&nbsp;</span><span class="style_10">+&nbsp;</span><span class="style_6">"\n"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//create&nbsp;file&nbsp;and&nbsp;check&nbsp;for&nbsp;existence</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">File&nbsp;file&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">File</span><span class="style_10">(</span><span class="style_11">directory</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if</span><span class="style_10">(</span><span class="style_11">file</span><span class="style_10">.</span><span class="style_11">exists</span><span class="style_10">())</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">sendCommands</span><span class="style_10">.</span><span class="style_11">directory</span><span class="style_10">(</span><span class="style_5">new&nbsp;</span><span class="style_11">File</span><span class="style_10">(</span><span class="style_11">directory</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">add</span><span class="style_10">(</span><span class="style_11">inputString</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">continue</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_6">"No&nbsp;such&nbsp;directory!"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">continue</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><span class="style_5">catch</span><span class="style_10">(</span><span class="style_11">Exception&nbsp;ex</span><span class="style_10">){}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">sendCommands</span><span class="style_10">.</span><span class="style_11">redirectOutput</span><span class="style_10">(</span><span class="style_11">ProcessBuilder</span><span class="style_10">.</span><span class="style_11">Redirect</span><span class="style_10">.</span><span class="style_11">INHERIT</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">sendCommands</span><span class="style_10">.</span><span class="style_11">command</span><span class="style_10">(</span><span class="style_11">splitInputString</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">Process&nbsp;externProcess&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">sendCommands</span><span class="style_10">.</span><span class="style_11">start</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">BufferedReader&nbsp;processOutput&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">BufferedReader</span><span class="style_10">(</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">new&nbsp;</span><span class="style_11">InputStreamReader</span><span class="style_10">(</span><span class="style_11">externProcess</span><span class="style_10">.</span><span class="style_11">getInputStream</span><span class="style_10">()));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">while</span><span class="style_10">(</span><span class="style_11">processOutput</span><span class="style_10">.</span><span class="style_11">ready</span><span class="style_10">())</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">processOutput</span><span class="style_10">.</span><span class="style_11">readLine</span><span class="style_10">());</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">catch</span><span class="style_10">(</span><span class="style_11">Exception&nbsp;ex</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_6">"There&nbsp;was&nbsp;an&nbsp;error&nbsp;with&nbsp;entered&nbsp;data!"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">continue</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">commands</span><span class="style_10">.</span><span class="style_11">add</span><span class="style_10">(</span><span class="style_11">inputString</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">IOException&nbsp;e</span><span class="style_10">)&nbsp;{}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><span class="style_2">//end&nbsp;while(true)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//close&nbsp;our&nbsp;input&nbsp;stream</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">inputReader</span><span class="style_10">.</span><span class="style_11">close</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">IOException&nbsp;e</span><span class="style_10">)&nbsp;{}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><span class="style_2">//end&nbsp;main()</span><br />
<span class="style_10">}</span><span class="style_2">//end&nbsp;class&nbsp;</span><br />
</p><div class="caption">Here we see the entire 'JavaShell' source, a small test run produces:
    <p><pre>
JavaShell: 
ls
build
build.xml
manifest.mf
nbproject
src
JavaShell: 
cat manifest.mf
JavaShell: Manifest-Version: 1.0
X-COMMENT: Main-Class will be added automatically by build



JavaShell: 
</pre></p>
</div></div>
<div class="space"></div>	
<a name="ChannelInterface"></a>
<h1>Channel Interface</h1>
<p>
    This program creates and Interface 'Channel' which has two methods; send() and receive(). These
    methods are used to pass objects within a buffer and should be thread safe. The program randomizes
    the receiving of messages which allows the program to demonstrate the ability to retrieve a message
    based on which order they were received.
</p>
<h2>Execution</h2>
<p>The program is executed from the command line and everything is handled within the program.
    We start with producing the 'Buffer' object which is a class designed to implement the Channel
    Interface and handle the objects. Messages are a series of random numbers generated and passed 
    to the Buffer class. The receiving of messages is randomized. All of this handled within a 
    'synchronized' block based on the Buffer object 'buffer'.</p>
    <div class="codeBoxN"><p><pre>
<span class="sc5">import</span><span class="sc0"> </span><span class="sc11">java</span><span class="sc10">.</span><span class="sc11">util</span><span class="sc10">.</span><span class="sc11">Random</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">ChannelInterface</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc11">String</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc2">//open our 'Buffer' for handling objects
</span><span class="sc0">        </span><span class="sc11">Buffer</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Buffer</span><span class="sc10">(</span><span class="sc4">7</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc2">//make thread-safe
</span><span class="sc0">        </span><span class="sc16">synchronized</span><span class="sc10">(</span><span class="sc11">buffer</span><span class="sc10">){</span><span class="sc0">
            </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc4">10</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc2">//generate random messages
</span><span class="sc0">                </span><span class="sc11">Random</span><span class="sc0"> </span><span class="sc11">random</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Random</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">sendingItem</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">random</span><span class="sc10">.</span><span class="sc11">nextDouble</span><span class="sc10">()*</span><span class="sc4">10</span><span class="sc10">+</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"sending: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Double</span><span class="sc10">.</span><span class="sc11">toString</span><span class="sc10">(</span><span class="sc11">sendingItem</span><span class="sc10">));</span><span class="sc0">
                </span><span class="sc2">//send the random message
</span><span class="sc0">                </span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">send</span><span class="sc10">(</span><span class="sc11">sendingItem</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//randomize receiving messages
</span><span class="sc0">                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">receiveOrNot</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">random</span><span class="sc10">.</span><span class="sc11">nextInt</span><span class="sc10">(</span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">receiveOrNot</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//retrieve item from buffer.
</span><span class="sc0">                    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"received: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">receive</span><span class="sc10">().</span><span class="sc11">toString</span><span class="sc10">());</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc2">//class to handle the objects.
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Buffer</span><span class="sc0"> </span><span class="sc5">implements</span><span class="sc0"> </span><span class="sc11">Channel</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc2">//store objects
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc11">Object</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">objects</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//placement pointer
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">inPtr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//sending pointer
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">outPtr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//current amount of objects
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">currentCount</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//constructor expects a size
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Buffer</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">size</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">objects</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Object</span><span class="sc10">[</span><span class="sc11">size</span><span class="sc10">];</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//implement send method
</span><span class="sc0">    </span><span class="sc11">@Override</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">send</span><span class="sc10">(</span><span class="sc11">Object</span><span class="sc0"> </span><span class="sc11">T</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//sending item, decrement total count
</span><span class="sc0">        </span><span class="sc11">currentCount</span><span class="sc10">--;</span><span class="sc0">
        </span><span class="sc2">//if we are empty, wait for receive
</span><span class="sc0">        </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc11">currentCount</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">wait</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc2">//place object
</span><span class="sc0">        </span><span class="sc11">objects</span><span class="sc10">[</span><span class="sc11">inPtr</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">T</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc2">//increment pointer - circular style buffer
</span><span class="sc0">        </span><span class="sc11">inPtr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">inPtr</span><span class="sc10">+</span><span class="sc4">1</span><span class="sc10">)%</span><span class="sc11">objects</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc2">//notify we have object
</span><span class="sc0">        </span><span class="sc11">notifyAll</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//implement receive method
</span><span class="sc0">    </span><span class="sc11">@Override</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Object</span><span class="sc0"> </span><span class="sc11">receive</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//increment total count
</span><span class="sc0">        </span><span class="sc11">currentCount</span><span class="sc10">++;</span><span class="sc0">
        </span><span class="sc2">//wait while full
</span><span class="sc0">        </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc11">currentCount</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">objects</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">wait</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc2">//get object from buffer
</span><span class="sc0">        </span><span class="sc11">Object</span><span class="sc0"> </span><span class="sc11">T</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">objects</span><span class="sc10">[</span><span class="sc11">outPtr</span><span class="sc10">];</span><span class="sc0">
        </span><span class="sc2">//increment output pointer - circular style
</span><span class="sc0">        </span><span class="sc11">outPtr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">outPtr</span><span class="sc10">+</span><span class="sc4">1</span><span class="sc10">)%</span><span class="sc11">objects</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc2">//notify we retrieved item
</span><span class="sc0">        </span><span class="sc11">notifyAll</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc2">//return object.
</span><span class="sc0">        </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">T</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc2">//interface for sending and receiving objects
</span><span class="sc16">interface</span><span class="sc0"> </span><span class="sc11">Channel</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//send method
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">abstract</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">send</span><span class="sc10">(</span><span class="sc11">Object</span><span class="sc0"> </span><span class="sc11">T</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc2">//receive method
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">abstract</span><span class="sc0"> </span><span class="sc11">Object</span><span class="sc0"> </span><span class="sc11">receive</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span></pre></p>
<div class="caption">Here we see the entire source file. A test run of the program produces:
<p><pre>
sending: 9.620284414870747
sending: 9.926389620202697
sending: 7.709959510375176
sending: 6.266048419079491
sending: 2.4751422710416664
received: 9.620284414870747
sending: 6.432704286422413
received: 9.926389620202697
sending: 3.1682327520653177
received: 7.709959510375176
sending: 9.82472916485016
received: 6.266048419079491
sending: 2.2863486033737437
sending: 4.252264429636522</pre></p></div></div>
<div class="space"></div>
        
    <a name="OneLaneBridge"></a>
    <h1>One Lane Bridge</h1>
    <p>
        This program is meant to demonstrate concurrency between two sets of Threads accessing a shared
        memory object. The idea is similar to a one-lane bridge and a queue of trucks wishing to cross
        the bridge; one set wants to go north, the other set wishes to go south. The trucks must take 
        turns on the bridge; the bridge represents a shared memory object and the truck represent different
        threads. This demonstrates the importance of the critical section of code and mutual exclusion
        between processes.
    </p>
    <h2>Execution</h2>
    <p>
        The program is executed from the command line and the creation of trucks is handled by the 
        program. We have two classes; Truck and Truck2 which represent the two sets of trucks. 
        Each Truck class extends Thread and contains two members, an id value and a reference to the
        shared 'Bridge'. The run() method has been overridden and calls the 'Bridge' class 'traverse()'
        method; these traverse() calls are within a 'synchronized' block. The Bridge class only contains
        the 'traverse()' method which outputs which Truck is crossing the bridge and puts the Truck to 
        'sleep()' which represents work done by the Thread.
    </p> 
    <div class="codeBoxN"><p><pre>
<span class="sc16">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">OneLaneBridge</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc11">String</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">)</span><span class="sc0"> 
    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//create the bridge
</span><span class="sc0">        </span><span class="sc11">Bridge</span><span class="sc0"> </span><span class="sc11">bridge</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//create two sets of trucks
</span><span class="sc0">            </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Truck</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">bridge</span><span class="sc10">).</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Truck2</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">+</span><span class="sc4">20</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">bridge</span><span class="sc10">).</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">    
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//method to cross the bridge
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">traverse</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Truck "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" started going!"</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc2">//travel the bridge
</span><span class="sc0">            </span><span class="sc11">Thread</span><span class="sc10">.</span><span class="sc11">sleep</span><span class="sc10">(</span><span class="sc4">300</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Truck "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" finished the bridge!"</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Truck</span><span class="sc0"> </span><span class="sc5">extends</span><span class="sc0"> </span><span class="sc11">Thread</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc2">//save our id value
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//reference to shared object
</span><span class="sc0">    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc0"> </span><span class="sc11">bridge</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc2">//constructor expects an id value and reference to shared bridge
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Truck</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc0"> </span><span class="sc11">inBridge</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc11">bridge</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inBridge</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc2">//synchronized traverse() call upon run()
</span><span class="sc0">    </span><span class="sc11">@Override</span><span class="sc0">   
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">run</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc16">synchronized</span><span class="sc10">(</span><span class="sc11">bridge</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">bridge</span><span class="sc10">.</span><span class="sc11">traverse</span><span class="sc10">(</span><span class="sc11">id</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Truck2</span><span class="sc0"> </span><span class="sc5">extends</span><span class="sc0"> </span><span class="sc11">Thread</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc0"> </span><span class="sc11">bridge</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Truck2</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Bridge</span><span class="sc0"> </span><span class="sc11">inBridge</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc11">bridge</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inBridge</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc11">@Override</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">run</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc16">synchronized</span><span class="sc10">(</span><span class="sc11">bridge</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">bridge</span><span class="sc10">.</span><span class="sc11">traverse</span><span class="sc10">(</span><span class="sc11">id</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span></pre></p><div class="caption">Here we see the entire 'OneLaneBridge' source file. A test run
    produces the following output:
    <p><pre>
Truck 0 started going!
Truck 0 finished the bridge!
Truck 24 started going!
Truck 24 finished the bridge!
Truck 4 started going!
Truck 4 finished the bridge!
Truck 22 started going!
Truck 22 finished the bridge!
Truck 2 started going!
Truck 2 finished the bridge!
Truck 23 started going!
Truck 23 finished the bridge!
Truck 3 started going!
Truck 3 finished the bridge!
Truck 21 started going!
Truck 21 finished the bridge!
Truck 1 started going!
Truck 1 finished the bridge!
Truck 20 started going!
Truck 20 finished the bridge!
</pre></p></div></div>

    <a name="HardwareSync"></a>
    <h1>Hardware Sync</h1>
    <p>
        This program is intended show shared mutual exclusion of an object between multiple threads.
        The program consists of five Threads who must share a 'HardwareData' object which can only
        be accessed by one Thread at a time. The HardwareData contains a 'value' which represents
        the data of the shared object which the Threads are competing to access, HardwareData also
        contains a Semaphore which is used to provide access to the Threads.
    </p>
    <h2>Execution</h2>
    <p>
        The program is executed from the command line and does not require any arguments. The program
        begins with creating an instance of 'HardwareData' which is the shared object we wish to 
        access. The program then enters an input loop which prompts the user to input whether they
        wish to run the 'get and set' method or the 'swap' method which are two seperate operations
        on the HardwareData. The 'get and set' method sends a new value to HardwareData where it is
        assigned to the 'value' member of HardwareData; the previous value is then returned to the 
        caller. The 'swap' method sends an instance of HardwareData to the function where the values
        of the two are swapped.
        </p>
        <div class="codeBoxN"><p><pre>
<span class="sc5">import</span><span class="sc0"> </span><span class="sc11">java</span><span class="sc10">.</span><span class="sc11">util</span><span class="sc10">.</span><span class="sc11">Scanner</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">import</span><span class="sc0"> </span><span class="sc11">java</span><span class="sc10">.</span><span class="sc11">util</span><span class="sc10">.</span><span class="sc11">concurrent</span><span class="sc10">.</span><span class="sc11">Semaphore</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">HardwareSync</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc11">String</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">[])</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">//create the shared mutex object
</span><span class="sc0">    </span><span class="sc11">HardwareData</span><span class="sc0"> </span><span class="sc11">lock</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc10">(</span><span class="sc5">false</span><span class="sc10">);</span><span class="sc0">
    
    </span><span class="sc2">//gather user input
</span><span class="sc0">    </span><span class="sc11">Scanner</span><span class="sc0"> </span><span class="sc11">scanner</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Scanner</span><span class="sc10">(</span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">in</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">choice</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">do</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"1: Run getandset()"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"2: Run swap()"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Enter Choice: "</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">choice</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">scanner</span><span class="sc10">.</span><span class="sc11">nextInt</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">choice</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)||(</span><span class="sc11">choice</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">));</span><span class="sc0">

    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc4">5</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">       </span><span class="sc2">// create and start 5 threads
</span><span class="sc0">    </span><span class="sc10">{</span><span class="sc0">
       </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Thread</span><span class="sc10">(</span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Worker</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">lock</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">choice</span><span class="sc10">)).</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Worker</span><span class="sc0"> </span><span class="sc5">implements</span><span class="sc0"> </span><span class="sc11">Runnable</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc2">//id of the Thread
</span><span class="sc0">  </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc2">//shred mutex object
</span><span class="sc0">  </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc0"> </span><span class="sc11">mutex</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc2">//store the run version the user chose.
</span><span class="sc0">  </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">runVersion</span><span class="sc10">;</span><span class="sc0">

  </span><span class="sc2">//constructor expects an id, mutex, and run version for each
</span><span class="sc0">  </span><span class="sc2">//    thread.
</span><span class="sc0">  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Worker</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc0"> </span><span class="sc11">mutex</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">inRunVersion</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">mutex</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">mutex</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">runVersion</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inRunVersion</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc11">@Override</span><span class="sc0">
  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">run</span><span class="sc10">()</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">runVersion</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Running getandset()!"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" wants to enter critical section!"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc2">//wait for access
</span><span class="sc0">      </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
          </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">access</span><span class="sc10">.</span><span class="sc11">acquire</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
      </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">getAndSet</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" in critical section"</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
          
          </span><span class="sc2">//do work
</span><span class="sc0">      </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
          </span><span class="sc11">Thread</span><span class="sc10">.</span><span class="sc11">sleep</span><span class="sc10">(</span><span class="sc4">3500</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
      </span><span class="sc2">//exit critical section
</span><span class="sc0">      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" out of critical section\n"</span><span class="sc0"> </span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">set</span><span class="sc10">(</span><span class="sc5">false</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">access</span><span class="sc10">.</span><span class="sc11">release</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc5">else</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Running swap()!"</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">swap</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">


  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">swap</span><span class="sc10">()</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">HardwareData</span><span class="sc0"> </span><span class="sc11">key</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" wants to enter critical section!"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc2">//wait for access
</span><span class="sc0">      </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
          </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">access</span><span class="sc10">.</span><span class="sc11">acquire</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">

      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" in critical section"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">swap</span><span class="sc10">(</span><span class="sc11">key</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">key</span><span class="sc10">.</span><span class="sc11">get</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc2">//do work
</span><span class="sc0">        </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">Thread</span><span class="sc10">.</span><span class="sc11">sleep</span><span class="sc10">(</span><span class="sc4">3500</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">ex</span><span class="sc10">.</span><span class="sc11">printStackTrace</span><span class="sc10">();}</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">set</span><span class="sc10">(</span><span class="sc5">false</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Thread "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" out of critical section\n"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">mutex</span><span class="sc10">.</span><span class="sc11">access</span><span class="sc10">.</span><span class="sc11">release</span><span class="sc10">();</span><span class="sc0">

    </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc2">// implementation of hardware-based implementation
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc0"> </span><span class="sc11">access</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">

  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">HardwareData</span><span class="sc10">(</span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">

  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">get</span><span class="sc10">()</span><span class="sc0"> 
  </span><span class="sc10">{</span><span class="sc0"> 
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0"> 
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">set</span><span class="sc10">(</span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">)</span><span class="sc0"> 
  </span><span class="sc10">{</span><span class="sc0"> 
      </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">;</span><span class="sc0"> 
  </span><span class="sc10">}</span><span class="sc0">

  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">getAndSet</span><span class="sc10">(</span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">oldValue</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">oldValue</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">

  </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">swap</span><span class="sc10">(</span><span class="sc11">HardwareData</span><span class="sc0"> </span><span class="sc11">other</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">temp</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">get</span><span class="sc10">();</span><span class="sc0">
    </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">set</span><span class="sc10">(</span><span class="sc11">other</span><span class="sc10">.</span><span class="sc11">get</span><span class="sc10">());</span><span class="sc0">
    </span><span class="sc11">other</span><span class="sc10">.</span><span class="sc11">set</span><span class="sc10">(</span><span class="sc11">temp</span><span class="sc10">);</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span>
</pre></p>
<div class="caption">Here we see the entire 'HardwareSync' source file. A test run of the 'swap' method
    would look like this:
    <p><pre>
1: Run getandset()
2: Run swap()
Enter Choice: 
2
Running swap()!
Thread 1 wants to enter critical section!
Thread 1 in critical section
Running swap()!
Thread 2 wants to enter critical section!
Running swap()!
Thread 0 wants to enter critical section!
Running swap()!
Running swap()!
Thread 4 wants to enter critical section!
Thread 3 wants to enter critical section!
Thread 1 out of critical section

Thread 2 in critical section
Thread 1 wants to enter critical section!
Thread 2 out of critical section

Thread 2 wants to enter critical section!
Thread 2 in critical section
Thread 2 out of critical section

Thread 0 in critical section
Thread 2 wants to enter critical section!
Thread 0 out of critical section

Thread 0 wants to enter critical section!
Thread 0 in critical section
Thread 0 out of critical section
</pre></p></div></div>
    
    <a name="SleepingBarber"></a>
    <h1>Sleeping Barber</h1>
    <p>
        This program demonstrates shared access and prevention of deadlock and race conditions between
        Threads. The program demonstrates the 'Sleeping Barber' problem where we have a Barber Shop 
        Thread which is the shared access object, and Customer Threads which try and access the Barber
        Shop. The barber can only cut one customer's hair at a time, but also has a waiting area for
        a certain amount of customers to wait for thier haircut. If the waiting area is full any customer
        that enters the shop must exit because there is no room for them to wait. If there are no customers
        to service, the BarberShop thread goes into a wait state until there is a customer to service.
    </p>
    <h2>Execution</h2>
    <p>
        The program is executed from the command line and does not require any arguments to be passed.
        The program begins with opening a 'BarberShop' object with a passed amount of 'chairs' for the
        waiting customers, we then start the BarberShop Thread. Next, the program creates a series of
        'Customer' Threads which are passed an id, and a reference to the BarberShop Thread. We start the
        customer threads after creating them, we halt the main thread for a bit to simulate the customers
        entering at different times.
        </p>
        <p>
            The Customer threads run() method is overridden. During a run() procedure, the Customer first
            notifies the BarberShop thread that they entered by calling 'release()' on the 'customer' 
            Semaphore; this allows the BarberShop to wake up and begin servicing the customer. The 
            'customer' Semaphore acts as the sleep point for the BarberShop, if the Semaphore is at zero
            (no customers) then the BarberShop enters a wait period while calling 'customer.acquire()'.
            After the Customer calls the 'release()' method, we check whether the BarberShop has any
            open chairs via a call to '.hasChair()' which returns a boolean value based on whether the 
            BarberShop chair count is above zero.</br>
            If the BarberShop does have open chairs, the Customer thread enters a loop which begins with
            calling '.takeChair()' which decrements the chair count within BarberShop, we then call the
            '.acquire()' method on the 'barber' Semaphore which will begin a haircut, or put the Customer
            thread into a wait state based on whether the 'barber' Semaphore is available. Once the haircut
            is complete, the thread exits. If the BarberShop does not have any open chairs, the Customer exits execution.                         
         </p>
         <p>
             The BarberShop class extends Thread and controls the 'barber' that will service each customer.
             The class contains three data members, two public Semaphores, 'customer' and 'barber' along with
             a private member 'availableChairs'. The 'customer' Semaphore is used to 'wake' the barber from 
             the waiting state when the Customer Thread calls the .release() method; the barber is in the
             waiting state while calling 'customer.acquire()', since the Semaphore is initialized at 0, the 
             barber will wait until a .release() call is made to the Semaphore at which point the barber will
             .acquire() the Semaphore and begin cutting the Customer's hair.</br>
             The BarberShop also contains the methods 'hasChair()' and 'takeChair()'. the hasChair() method
             returns a boolean value based on the expression of 'availableChairs > 0', this will tell the
             caller whether the BarberShop has any available chairs for Customer Threads to sit in. The 
             takeChair() method is called from the Customer Thread and decrements the total available chairs
             that the BarberShop has, this allows the BarberShop class to hold a specific number of Threads
             waiting for service.
          </p>
          <div class="codeBoxN"><p><pre>
<span class="sc5">import</span><span class="sc0"> </span><span class="sc11">java</span><span class="sc10">.</span><span class="sc11">util</span><span class="sc10">.</span><span class="sc11">concurrent</span><span class="sc10">.</span><span class="sc11">Semaphore</span><span class="sc10">;</span><span class="sc0">



</span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">SleepingBarber</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">main</span><span class="sc10">(</span><span class="sc11">String</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">)</span><span class="sc0"> 
    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//open the barber shop
</span><span class="sc0">        </span><span class="sc11">BarberShop</span><span class="sc0"> </span><span class="sc11">barberShop</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">BarberShop</span><span class="sc10">(</span><span class="sc4">5</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc4">15</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//create a customer
</span><span class="sc0">            </span><span class="sc11">Customer</span><span class="sc0"> </span><span class="sc11">customer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Customer</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">barberShop</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">customer</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">   
            </span><span class="sc2">//have them enter at different times
</span><span class="sc0">            </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">Thread</span><span class="sc10">.</span><span class="sc11">sleep</span><span class="sc10">(</span><span class="sc4">150</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">    
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Customer</span><span class="sc0"> </span><span class="sc5">extends</span><span class="sc0"> </span><span class="sc11">Thread</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">final</span><span class="sc0"> </span><span class="sc11">BarberShop</span><span class="sc0"> </span><span class="sc11">barberShop</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">cut</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Customer</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">BarberShop</span><span class="sc0"> </span><span class="sc11">inBarber</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inID</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">barberShop</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inBarber</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">cut</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc11">@Override</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">run</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">        
        </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc2">//notify there is a customer
</span><span class="sc0">            </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">customer</span><span class="sc10">.</span><span class="sc11">release</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc2">//if there are available chairs
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">hasChair</span><span class="sc10">())</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//while we didnt get a haircut..
</span><span class="sc0">                </span><span class="sc5">while</span><span class="sc10">(!</span><span class="sc11">cut</span><span class="sc10">)</span><span class="sc0"> 
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//take a chair
</span><span class="sc0">                    </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">takeChair</span><span class="sc10">(</span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">id</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc2">//wait for the barber
</span><span class="sc0">                    </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">barber</span><span class="sc10">.</span><span class="sc11">acquire</span><span class="sc10">();</span><span class="sc0">
                        </span><span class="sc2">//get our haircut
</span><span class="sc0">                        </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">cutHair</span><span class="sc10">(</span><span class="sc5">this</span><span class="sc10">.</span><span class="sc11">id</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc2">//release the barber
</span><span class="sc0">                    </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">barber</span><span class="sc10">.</span><span class="sc11">release</span><span class="sc10">();</span><span class="sc0">
                    </span><span class="sc2">//ok to exit loop
</span><span class="sc0">                    </span><span class="sc11">cut</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc5">else</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//there were no chairs, we leave
</span><span class="sc0">                </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Customer "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" has left!"</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//customer left
</span><span class="sc0">                </span><span class="sc11">barberShop</span><span class="sc10">.</span><span class="sc11">customer</span><span class="sc10">.</span><span class="sc11">acquire</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">BarberShop</span><span class="sc0"> </span><span class="sc5">extends</span><span class="sc0"> </span><span class="sc11">Thread</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc0"> </span><span class="sc11">customer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc0"> </span><span class="sc11">barber</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Semaphore</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc16">private</span><span class="sc0"> </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">availableChairs</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc11">BarberShop</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">chairSize</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">availableChairs</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">chairSize</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc11">@Override</span><span class="sc0">
    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">run</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//infinite loop
</span><span class="sc0">        </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">try</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc2">//wait for a customer to arrive
</span><span class="sc0">                </span><span class="sc11">customer</span><span class="sc10">.</span><span class="sc11">acquire</span><span class="sc10">();</span><span class="sc0">  
            </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">            
        </span><span class="sc10">}</span><span class="sc0">        
    </span><span class="sc10">}</span><span class="sc0">
    
    </span><span class="sc2">//method to return whether are open chairs
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">boolean</span><span class="sc0"> </span><span class="sc11">hasChair</span><span class="sc10">()</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">availableChairs</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    
    </span><span class="sc2">//method to 'take' a chair
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">takeChair</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">)</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Customer "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" has taken a chair!"</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc11">availableChairs</span><span class="sc10">--;</span><span class="sc0">
        </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Open seats: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">availableChairs</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
    
    </span><span class="sc2">//cut the customer's hair
</span><span class="sc0">    </span><span class="sc16">public</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">cutHair</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">)</span><span class="sc0"> 
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Customer "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" is getting a cut!"</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc5">try</span><span class="sc0"> 
        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//open a seat
</span><span class="sc0">            </span><span class="sc11">availableChairs</span><span class="sc10">++;</span><span class="sc0">
            </span><span class="sc11">Thread</span><span class="sc10">.</span><span class="sc11">sleep</span><span class="sc10">(</span><span class="sc4">505</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">out</span><span class="sc10">.</span><span class="sc11">println</span><span class="sc10">(</span><span class="sc6">"Customer "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" is finished!"</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">InterruptedException</span><span class="sc0"> </span><span class="sc11">ex</span><span class="sc10">){}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span>
</pre></p><div class="caption">Here we see the entire 'SleepingBarber' source file. A test run of the 
    program would look like this:
    <p><pre>
Customer 0 has taken a chair!
Open seats: 4
Customer 0 is getting a cut!
Customer 1 has taken a chair!
Open seats: 4
Customer 2 has taken a chair!
Open seats: 3
Customer 3 has taken a chair!
Open seats: 2
Customer 0 is finished!
Customer 1 is getting a cut!
Customer 4 has taken a chair!
Open seats: 2
Customer 5 has taken a chair!
Open seats: 1
Customer 6 has taken a chair!
Open seats: 0
Customer 1 is finished!
Customer 2 is getting a cut!
Customer 7 has taken a chair!
Open seats: 0
Customer 8 has left!
Customer 9 has left!
Customer 10 has left!
Customer 2 is finished!
Customer 3 is getting a cut!
Customer 11 has taken a chair!
Open seats: 0
Customer 12 has left!
Customer 13 has left!
Customer 3 is finished!
Customer 4 is getting a cut!
Customer 14 has taken a chair!
Open seats: 0
Customer 4 is finished!
Customer 5 is getting a cut!
Customer 5 is finished!
Customer 6 is getting a cut!
Customer 6 is finished!
Customer 7 is getting a cut!
Customer 7 is finished!
Customer 11 is getting a cut!
Customer 11 is finished!
Customer 14 is getting a cut!
Customer 14 is finished!</pre></p></div></div>

<a name="ThreadedEncrypt"><h1>Threaded Encryption</h1></a>
	<p>
		This program is intended to demonstrate a multi-threaded encryption process. There are two threads
		within the program, one thread will handle the input while the other will handle the encryption and
		output. The input thread is meant to receive the input from a user, this will be strings entered on 
		the command line, once the input is received the thread will pass this string to the second thread
		where it will be encrypted. The input thread will output the key used during encryption followed by the
		second thread outputting the original string in encrypted form.
	</p>
	<h2>Execution</h2>
	<p>
		The program is executed from the command line and does not require and arguments. The program begins with
		opening two objects, and InputThread and an OutputThread. The InputThread is a class which extends
		Thread and is intended to handle input from the user and encryption of the message. The constructor of the 
		InputThread requests an instance of AES from Java security libraries, while also expecting a reference to 
		the OutputThread in order to pass the encrypted message over for deryption.
		The InputThread has
		an overridden run() method which prompts the user and receives the input via a Java Scanner object. The 
		thread then encrypts the received input and prints the key to the user. The encrypted input will then be
		passed to the OutputThread via a call to .decryptMessage().</br>
		The OutputThread class puts intself into a while(true) loop during the run() method. The thread will exist
		within this loop and provide a caller with the '.decryptMessage()' method which expects an encrypted byte
		array. The method will decrypt the passed array using the AES algorithm. The method then prints the encrypted
		message and the decrypted message.
	</p>
    <div class="codeBoxN">
    <p>
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">security</span><span class="style_10">.</span><span class="style_11">InvalidKeyException</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">security</span><span class="style_10">.</span><span class="style_11">NoSuchAlgorithmException</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">security</span><span class="style_10">.</span><span class="style_11">SecureRandom</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">java</span><span class="style_10">.</span><span class="style_11">util</span><span class="style_10">.</span><span class="style_11">Scanner</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">BadPaddingException</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">Cipher</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">IllegalBlockSizeException</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">KeyGenerator</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">NoSuchPaddingException</span><span class="style_10">;</span><br />
<span class="style_5">import&nbsp;</span><span class="style_11">javax</span><span class="style_10">.</span><span class="style_11">crypto</span><span class="style_10">.</span><span class="style_11">SecretKey</span><span class="style_10">;</span><br />
<br />
<span class="style_5">public&nbsp;class&nbsp;</span><span class="style_19">ThreadedEncrypt&nbsp;</span><br />
<span class="style_10">{</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;static&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">main</span><span class="style_10">(</span><span class="style_11">String</span><span class="style_10">[]&nbsp;</span><span class="style_11">args</span><span class="style_10">)&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//open&nbsp;the&nbsp;output&nbsp;thread&nbsp;object</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">OutputThread&nbsp;</span><span class="style_11">output&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_19">OutputThread</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//open&nbsp;the&nbsp;input&nbsp;thread,&nbsp;needs&nbsp;a&nbsp;reference&nbsp;to&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//&nbsp;&nbsp;the&nbsp;output&nbsp;thread&nbsp;so&nbsp;it&nbsp;can&nbsp;pass&nbsp;objects</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">InputThread&nbsp;</span><span class="style_11">input&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_19">InputThread</span><span class="style_10">(</span><span class="style_11">output</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//start&nbsp;the&nbsp;threads</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">output</span><span class="style_10">.</span><span class="style_11">start</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">input</span><span class="style_10">.</span><span class="style_11">start</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
<span class="style_10">}</span><br />
<br />
<span class="style_2">//class&nbsp;to&nbsp;handle&nbsp;the&nbsp;input&nbsp;thread</span><br />
<span class="style_5">class&nbsp;</span><span class="style_19">InputThread&nbsp;</span><span class="style_5">extends&nbsp;</span><span class="style_11">Thread</span><br />
<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;</span><span class="style_11">KeyGenerator&nbsp;keyMaker</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//reference&nbsp;to&nbsp;the&nbsp;output&nbsp;thread&nbsp;to&nbsp;pass&nbsp;objects&nbsp;to</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;</span><span class="style_19">OutputThread&nbsp;</span><span class="style_11">output</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_19">InputThread</span><span class="style_10">(</span><span class="style_19">OutputThread&nbsp;</span><span class="style_11">passedOutput</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">output&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">passedOutput</span><span class="style_10">;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//request&nbsp;AES&nbsp;from&nbsp;Java</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">keyMaker&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">KeyGenerator</span><span class="style_10">.</span><span class="style_11">getInstance</span><span class="style_10">(</span><span class="style_6">"AES"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">NoSuchAlgorithmException&nbsp;ex</span><span class="style_10">)&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_11">ex</span><span class="style_10">.</span><span class="style_11">toString</span><span class="style_10">());}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">@Override</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">run</span><span class="style_10">()</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//run&nbsp;until&nbsp;user&nbsp;exits</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">while</span><span class="style_10">(</span><span class="style_5">true</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//prompt&nbsp;for&nbsp;and&nbsp;gather&nbsp;user&nbsp;input</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">(</span><span class="style_6">"Enter&nbsp;message:&nbsp;"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">Scanner&nbsp;inputScanner&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">Scanner</span><span class="style_10">(</span><span class="style_11">System</span><span class="style_10">.</span><span class="style_11">in</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">String&nbsp;inputString&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">inputScanner</span><span class="style_10">.</span><span class="style_11">nextLine</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//ask&nbsp;Java&nbsp;for&nbsp;a&nbsp;'secure'&nbsp;random&nbsp;number</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">SecureRandom&nbsp;random&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">new&nbsp;</span><span class="style_11">SecureRandom</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//start&nbsp;the&nbsp;key&nbsp;maker</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">keyMaker</span><span class="style_10">.</span><span class="style_11">init</span><span class="style_10">(</span><span class="style_11">random</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">SecretKey&nbsp;key&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">keyMaker</span><span class="style_10">.</span><span class="style_11">generateKey</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">Cipher&nbsp;cipher&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">Cipher</span><span class="style_10">.</span><span class="style_11">getInstance</span><span class="style_10">(</span><span class="style_6">"AES"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cipher</span><span class="style_10">.</span><span class="style_11">init</span><span class="style_10">(</span><span class="style_11">Cipher</span><span class="style_10">.</span><span class="style_11">ENCRYPT_MODE</span><span class="style_10">,&nbsp;</span><span class="style_11">key</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//display&nbsp;key&nbsp;to&nbsp;user</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">printKey</span><span class="style_10">(</span><span class="style_11">key</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//encrypt&nbsp;message</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">byte</span><span class="style_10">[]&nbsp;</span><span class="style_11">encryptedMessage&nbsp;</span><span class="style_10">=&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cipher</span><span class="style_10">.</span><span class="style_11">doFinal</span><span class="style_10">(</span><span class="style_11">inputString</span><span class="style_10">.</span><span class="style_11">getBytes</span><span class="style_10">());&nbsp;&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//pass&nbsp;message&nbsp;to&nbsp;the&nbsp;output&nbsp;thread</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">output</span><span class="style_10">.</span><span class="style_11">decryptMessage</span><span class="style_10">(</span><span class="style_11">encryptedMessage</span><span class="style_10">,&nbsp;</span><span class="style_11">key</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">NoSuchAlgorithmException&nbsp;</span><span class="style_10">|&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">NoSuchPaddingException&nbsp;</span><span class="style_10">|</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">InvalidKeyException&nbsp;ex</span><span class="style_10">)&nbsp;{}&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">IllegalBlockSizeException&nbsp;</span><span class="style_10">|&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">BadPaddingException&nbsp;ex</span><span class="style_10">)&nbsp;{}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//method&nbsp;to&nbsp;print&nbsp;keys&nbsp;and&nbsp;encrytion&nbsp;in&nbsp;HEX&nbsp;form.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">printKey</span><span class="style_10">(</span><span class="style_11">SecretKey&nbsp;key</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">byte</span><span class="style_10">[]&nbsp;</span><span class="style_11">keyBytes&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">key</span><span class="style_10">.</span><span class="style_11">getEncoded</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">char</span><span class="style_10">[]&nbsp;</span><span class="style_11">hexCodes&nbsp;</span><span class="style_10">=&nbsp;{</span><span class="style_7">'0'</span><span class="style_10">,&nbsp;</span><span class="style_7">'1'</span><span class="style_10">,&nbsp;</span><span class="style_7">'2'</span><span class="style_10">,&nbsp;</span><span class="style_7">'3'</span><span class="style_10">,&nbsp;</span><span class="style_7">'4'</span><span class="style_10">,&nbsp;</span><span class="style_7">'5'</span><span class="style_10">,&nbsp;</span><span class="style_7">'6'</span><span class="style_10">,&nbsp;</span><span class="style_7">'7'</span><span class="style_10">,&nbsp;</span><span class="style_7">'8'</span><span class="style_10">,&nbsp;</span><span class="style_7">'9'</span><span class="style_10">,</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_7">'A'</span><span class="style_10">,&nbsp;</span><span class="style_7">'B'</span><span class="style_10">,&nbsp;</span><span class="style_7">'C'</span><span class="style_10">,&nbsp;</span><span class="style_7">'D'</span><span class="style_10">,&nbsp;</span><span class="style_7">'E'</span><span class="style_10">,&nbsp;</span><span class="style_7">'F'</span><span class="style_10">};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">for&nbsp;</span><span class="style_10">(</span><span class="style_16">int&nbsp;</span><span class="style_11">i</span><span class="style_10">=</span><span class="style_4">0</span><span class="style_10">;&nbsp;</span><span class="style_11">i</span><span class="style_10">&lt;</span><span class="style_11">keyBytes</span><span class="style_10">.</span><span class="style_11">length</span><span class="style_10">;&nbsp;</span><span class="style_11">i</span><span class="style_10">++)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">int&nbsp;</span><span class="style_11">b&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">Math</span><span class="style_10">.</span><span class="style_11">abs</span><span class="style_10">(</span><span class="style_11">keyBytes</span><span class="style_10">[</span><span class="style_11">i</span><span class="style_10">]);&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">print</span><span class="style_10">((</span><span class="style_11">hexCodes</span><span class="style_10">[</span><span class="style_11">b</span><span class="style_10">/</span><span class="style_4">16</span><span class="style_10">]+</span><span class="style_6">""</span><span class="style_10">)&nbsp;+&nbsp;(</span><span class="style_11">hexCodes</span><span class="style_10">[</span><span class="style_11">b&nbsp;</span><span class="style_10">&amp;&nbsp;</span><span class="style_4">15</span><span class="style_10">]+</span><span class="style_6">""</span><span class="style_10">)&nbsp;+&nbsp;</span><span class="style_6">"&nbsp;"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
<span class="style_10">}</span><br />
<br />
<span class="style_2">//class&nbsp;to&nbsp;handle&nbsp;the&nbsp;output</span><br />
<span class="style_5">class&nbsp;</span><span class="style_19">OutputThread&nbsp;</span><span class="style_5">extends&nbsp;</span><span class="style_11">Thread</span><br />
<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">private&nbsp;</span><span class="style_11">Cipher&nbsp;cipher</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_19">OutputThread</span><span class="style_10">()</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{&nbsp;&nbsp;&nbsp;</span><span class="style_2">//ask&nbsp;Java&nbsp;for&nbsp;a&nbsp;Cipher&nbsp;for&nbsp;AES</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cipher&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">Cipher</span><span class="style_10">.</span><span class="style_11">getInstance</span><span class="style_10">(</span><span class="style_6">"AES"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">NoSuchAlgorithmException&nbsp;</span><span class="style_10">|&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">NoSuchPaddingException&nbsp;ex</span><span class="style_10">)&nbsp;{}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">@Override</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">run</span><span class="style_10">()</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">while</span><span class="style_10">(</span><span class="style_5">true</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//wait&nbsp;for&nbsp;inputThread</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">public&nbsp;</span><span class="style_16">void&nbsp;</span><span class="style_11">decryptMessage</span><span class="style_10">(</span><span class="style_16">byte</span><span class="style_10">[]&nbsp;</span><span class="style_11">message</span><span class="style_10">,&nbsp;</span><span class="style_11">SecretKey&nbsp;key</span><span class="style_10">)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">try&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cipher</span><span class="style_10">.</span><span class="style_11">init</span><span class="style_10">(</span><span class="style_11">Cipher</span><span class="style_10">.</span><span class="style_11">DECRYPT_MODE</span><span class="style_10">,&nbsp;</span><span class="style_11">key</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//display&nbsp;encrypted&nbsp;to&nbsp;user</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_6">"Encrypted&nbsp;Message:"</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_5">new&nbsp;</span><span class="style_11">String</span><span class="style_10">(</span><span class="style_11">message</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">byte</span><span class="style_10">[]&nbsp;</span><span class="style_11">decrypted&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_11">cipher</span><span class="style_10">.</span><span class="style_11">doFinal</span><span class="style_10">(</span><span class="style_11">message</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_2">//display&nbsp;decrypted&nbsp;message</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">System</span><span class="style_10">.</span><span class="style_11">out</span><span class="style_10">.</span><span class="style_11">println</span><span class="style_10">(</span><span class="style_5">new&nbsp;</span><span class="style_11">String</span><span class="style_10">(</span><span class="style_11">decrypted</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">InvalidKeyException&nbsp;ex</span><span class="style_10">)&nbsp;{}&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">catch&nbsp;</span><span class="style_10">(</span><span class="style_11">IllegalBlockSizeException&nbsp;</span><span class="style_10">|&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">BadPaddingException&nbsp;ex</span><span class="style_10">)&nbsp;{}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
<span class="style_10">}</span>
    </p><div class="caption">Here we see the entire 'ThreadedEncrypt' source file. A test run of the program
    would produce the following: <pre>
Enter message: hello world
5A 7B 7A 1B 3C 52 74 18 39 40 34 42 5F 68 64 27 
Encrypted Message:
��O9`&6z�q)-�
hello world
Enter message: Hello World
67 36 0E 26 29 38 59 28 23 2F 2C 2B 4A 54 61 54 
Encrypted Message:
<�v�K/u�v
Hello World
Enter message: </pre></div>
    </div>
    
    
    
  <div id="footer">
            <div id="copyright">
                <p>Copyright &copy; 2015 Dustin Anderson</p>
            </div>
            <div id="aboutButton">
                <p><a href="../index.html">About</a></p>
            </div>
        </div>
    </div><!--End content-div-->
        <div id="sideBar">
            <ul id="sideBarList">
                <p style="text-align:center; text-decoration:underline;">Projects</p>
                <li class="sideBarItem" ><a href="SerialComm.html">Serial Communication</a></li>
                <li class="sideBarItem" ><a href="File.html">File Compression</a></li>
				<p style="text-align:center; text-decoration:underline;">Snippets</p>
				<li class="sideBarItem"><a href="#FibNonRecur">Non-Recursive Fibonacci</a></li>
                <li class="sideBarItem"><a href="#JavaShell">Java Shell</a></li>
                <li class="sideBarItem"><a href="#ChannelInterface">Channel Interface</a></li>
                <li class="sideBarItem"><a href="#OneLaneBridge">One Lane Bridge</a></li>
                <li class="sideBarItem"><a href="#HardwareSync">Hardware Sync</a></li>
                <li class="sideBarItem"><a href="#SleepingBarber">Sleeping Barber</a></li>
                <li class="sideBarItem"><a href="#ThreadedEncrypt">Threaded Encryption</a></li>
            </ul>
        </div>
        <div id="menuBar">
            <ul id="menuList">
                <li class="menuItem"><a href="../CPP/CPP.html">C++</a></li>
                <li class="menuItem"><a href="../CSHARP/CSharp.html">C#</a></li>
                <li class="menuItem" style="color: #80CC80;">Java</li>
                <li class="menuItem"><a href="../ASM/ASM.html">Embedded Systems</a></li>
                <li class="menuItem"><a href="../ANDROID/AndroidHome.html">Android</a></li>
            </ul>
        </div>
    </div><!--end container-->
</body>
</html>
