<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="../stylesheet.css">

    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="../script.js"></script>
    <title>C# File Compression</title>
</head>
<body>
    <div id="background" style="padding-top: 200px; padding-left:100px;"><img src="logoC.jpg" /></div>
    <div id="textBackground"></div>
    <div id="container">
    <div class="content-div">
        <h1 style="text-align:center">File Compression</h1>
        <p>
            This program is intended to compress text files using the Huffman Algorithm for data compression. The program uses three classes; Compressor.cs, 
            RootedBinaryTree.cs, and Test.cs. The program uses the Test.cs class as the main entry point and this is where we create our 'Compressor' object that will
            handle the compression and decompression operations. I was able to compress my test file by about 57%. The test file being the plain text version of the 
            United States Constitution available <a href="http://www.usconstitution.net/const.txt"target="_blank">here.</a> The original file is 44.9KB and the compressed
            file is 25.7KB. </p>
        <div class="codeBoxN">
            <pre>
                
</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">FileCompression</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Test</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">Main</span><span class="sc10">(</span><span class="sc16">string</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">args</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Directory</span><span class="sc10">.</span><span class="sc11">GetCurrentDirectory</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">Console</span><span class="sc10">.</span><span class="sc11">WriteLine</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">Compressor</span><span class="sc10">.</span><span class="sc11">compress</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">"\\TextFile1.txt"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">"\\output.bin"</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">Compressor</span><span class="sc10">.</span><span class="sc11">decompress</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">"\\output.bin"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">dir</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">"\\TextFile2.txt"</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</pre><div class="caption">Here we see the Test.cs class that acts as a testing file. This is the main entry point to the program and where we create our 'Compressor' object.</div>
        </div>
        <p>
            Once the Compressor is created, we call the 'compress(string inputFileName, string outputFileName)' which expects two strings. A valid input file string is expected 
            which is the file intended to be compressed, along with an output file name which the program must have permission to write to avoid exceptions. Once this method
            is called, the program will begin compressing the input file.
        </p>
        <h2>Compression</h2>
        <p>
            The 'Compressor' class contains a private struct which has three public members; string 'plainWord', double 'probability', and string 'codeWord'. This struct is used
            for each different character within the input file. Each struct will then contain the 'plain' character it represents, the probability of that character to appear within the
            file, and the assigned 'code word' that we give the character during our Huffman algorithm.
        </p>
        <div class="codeBoxN">
            <pre>
                
</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">FileCompression</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Compressor</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">struct</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">plainWord</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">probability</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeWord</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">};</span><span class="sc0">
</pre><div class="caption">Here we see the 'Word' struct that will be used to represent each character within the input file.</div>
        </div>
        <p>
            We begin the 'compress' method by opening a <a href="http://msdn.microsoft.com/en-us/library/system.io.streamreader%28v=vs.110%29.aspx"target="_blank">StreamReader</a>
         object, 'inputReader', that will read the input file. The StreamReader reads the input file one line at a time and processes the characters within this line. We also add 
        the carriage return that is lost when using the StreamReader. This allows us to avoid reading the entire input file into memory. During the reading of the file, we examine
        each character within the returned line and compare it against a <a href="http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.110%29.aspx"target="_blank">List</a>
        of  'found' characters; if the character being examined is not within the List, we add the character to the list, otherwise we increment a second List which acts as a 
        counter for each character. After the input file is finished being read, we have two List objects, one with the plain characters found and the other, an index matched
        List of the number of occurences of each character.</p>
        <div class="codeBoxN">
            <pre>                
        </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">compress</span><span class="sc10">(</span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputFileName</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">outputFileName</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">char</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">char</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">double</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">double</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">StreamReader</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamReader</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0"> 
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">ReadLine</span><span class="sc10">())</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">Environment</span><span class="sc10">.</span><span class="sc11">NewLine</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">currentChar</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
                    </span><span class="sc11">totalCharacters</span><span class="sc10">++;</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(!(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Contains</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">)))</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">else</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">newCount</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">)];</span><span class="sc0">
                        </span><span class="sc11">newCount</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">));</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">newCount</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">Close</span><span class="sc10">();</span><span class="sc0">
</pre><div class="caption">Here we see the procedure for reading the input file and filling our List objects with the data pertaining to each character within the input file.</div>
        </div>
        <p>
            Once we have the two List objects, we begin creating our 'Word' structs which are put into third List object. We put these into a List object so that we can sort this
            list as we build it. The Huffman algorithm expects a sorted array to be passed, so we sort the 'Word' objects into the List and call <a href="http://msdn.microsoft.com/en-us/library/x303t819%28v=vs.110%29.aspx"target="_blank">List.ToArray().</a>
         to put the 'Word' objects into a 'Word' array, which we then pass to the Huffman algorithm.
        </p>
        <div class="codeBoxN">
            <pre>                
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc2">//initialize the List with a first element
</span><span class="sc0">            </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">].</span><span class="sc11">ToString</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">ToString</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//sort Words as we build the List
</span><span class="sc0">                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">probability</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">ToArray</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
</pre><div class="caption">Here we see the construction of the sorted List object of 'Word's, then the copy to an array of 'Word's.</div>
        </div>
        <div class="space"></div>
        <h2>Huffman Alogorithm</h2>
        <p>
            The Huffman algorithm expects a sorted array of 'Word' objects and begins by creating a 'RootedBinaryTree' object for each character within the array. 
            We then begin merging these binary trees until we have only one large tree which contains all the characters sorted according to probability. The trees are combined
            based on thier probability, the two lowest probability trees are merged and the newly formed tree takes the sum of the two combined trees. This process is 
            repeated until we have only one tree left within the List of trees. This allows us to form a binary tree whose elements are sorted based on thier probability, which we need
            to create the 'code words' we use to compress the file.
        </p>
        <div class="codeBoxN">
            <pre>
                </span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">huffman</span><span class="sc10">(</span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;&gt;();</span><span class="sc0">
            </span><span class="sc2">//make our initial list of binary trees
</span><span class="sc0">            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]));</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//combine trees
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//combine the probabilities
</span><span class="sc0">                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//make a new tree for the combined trees.
</span><span class="sc0">                </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTrees</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">combineTrees</span><span class="sc10">(</span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">));</span><span class="sc0">
                </span><span class="sc2">//make sure we are at root
</span><span class="sc0">                </span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">toRoot</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">newTreeIndex</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//insert tree
</span><span class="sc0">                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc10">))</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc2">//did we reach the end?
</span><span class="sc0">                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">newTreeIndex</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//if not, keep looping until we find our insert point
</span><span class="sc0">                    </span><span class="sc11">newTreeIndex</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//insert tree
</span><span class="sc0">                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTrees</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//end while( &gt;1)
</span><span class="sc0">            </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">).</span><span class="sc11">toRoot</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end huffman()
</span><span class="sc0">
</pre><div class="caption">Here we see the Huffman algorithm that combines the 'RootedBinaryTree' objects.</div>
        </div>
        <p>
            After the 'RootedBinaryTree' objects are combined, we call a recursive function that traverses the tree and assigns the 'code words' that we use to compress 
            the file. The code words are based on the probability of the character appearing within the input file; the higher the probability of a character, the shorter the 
            code word will be. The process simply labels '1' or '0' based on the traversal of the tree to get to the character. Left traversal will add a label '0' while right
            traversal will add a label '1'. This also gives our code words the property in which no code word will be a prefix of another. This is important when we are reading
            the back during 'decompress'.
        </p>
        <div class="codeBoxN">
            <pre>
</span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//if we can go left...
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveLeft</span><span class="sc10">())</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//adjust codeword string accordingly...
</span><span class="sc0">                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//if we have a character here....
</span><span class="sc0">                    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//find the character in our 'theWords' array...
</span><span class="sc0">                        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//label this character with a codeword string
</span><span class="sc0">                            </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//recusive call
</span><span class="sc0">                </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//back from recursion, remove a character from our codeword string
</span><span class="sc0">                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//end if(combinedTree.moveLeft())
</span><span class="sc0">            </span><span class="sc2">//do the same for right sides....
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveRight</span><span class="sc10">())</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc7">'1'</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//explored all possibilities, move back up....
</span><span class="sc0">            </span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveUp</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span>
</pre><div class="caption">Here we see the recursive function that will label our 'Word' objects with thier respective code word.</div>
        </div>
        <div class="space"></div>
        <h2>Writing the Compressed File</h2>
        <p>
            Once we have the Huffman code words from our algorithm, we begin writing the compressed file to memory. The file is written in binary and is named with the 
            passed parameter when calling the 'compress' method of the Compressor class. We begin writing the compressed file by first writing our dictionary of code words;
             this is organized as such: we first write the total number of characters and thier code words, labeled 'pairs', followed by writing the original file. We use the 
            <a href="http://msdn.microsoft.com/en-us/library/system.io.filestream%28v=vs.110%29.aspx"target="_blank">FileStream</a> class to write our file.         
        </p>
        <p>
            Firstly, we write the plain string character as a byte followed by the code word length, and finally the code word itself as a byte. The code word is written by
            iterating over the string object 'codeWord' within the 'Word' struct. We create a byte, 'writeByte', and shift this for each position within the string 'codeWord'. 
            we increment the 'writeByte' for every '1' character within the string 'codeWord', the shifting will take care of '0' characters within 'codeWord'. The process is 
            compared against a 'counter' integer that counts our shifts. Once the 'counter' reaches eight, we know we have filled a byte and it is time to write this byte to the 
            file. This allows us to write the file in binary.
        </p>
        <div class="codeBoxN">
            <pre>
                 </span><span class="sc2">//get the output file
</span><span class="sc0">            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">File</span><span class="sc10">.</span><span class="sc11">OpenWrite</span><span class="sc10">(</span><span class="sc11">outputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc2">//print the dictionary to binary file
</span><span class="sc0">            </span><span class="sc16">byte</span><span class="sc0"> </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">stringPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//write total pairs
</span><span class="sc0">            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc2">//write code word
                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]);</span><span class="sc0">
                </span><span class="sc2">//write code word length
</span><span class="sc0">                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//write the code word
</span><span class="sc0">                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">byte</span><span class="sc10">)(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//pad the (end) of the last byte
</span><span class="sc0">                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
</pre><div class="caption">Here we see the procedure for writing the dictionary into the compressed file.</div>
        </div>
        <p>
            Once we write the dictionary of code words, we write the original file to memory. This is accomplished with nearly the same procedure we had when we 
            first read the file; opening another StreamReader object and reading the original file by line. We read a line from the file and add the carriage return, we then
            examine each character of the returned string and locate the correct 'Word' object that contains our code word. The character is then written to file using the 
            binary representation of the code word; this process is similar to writing the dictionary to file.
        </p>
        <div class="codeBoxN">
            <pre>
                
            </span><span class="sc2">//print the document to binary file
</span><span class="sc0">            </span><span class="sc11">inputReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamReader</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//while we have a string to read
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">ReadLine</span><span class="sc10">())</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//for every character in inputString
</span><span class="sc0">                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">Environment</span><span class="sc10">.</span><span class="sc11">NewLine</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//find the correct Word object
</span><span class="sc0">                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">&lt;</span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//once we find the correct Word object
</span><span class="sc0">                        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">])</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//print the code word of the Word object
</span><span class="sc0">                            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc10">++)</span><span class="sc0">
                            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//shift our byte
</span><span class="sc0">                                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc2">//add our value
</span><span class="sc0">                                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">byte</span><span class="sc10">)(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">[</span><span class="sc11">w</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//write the byte once we hit 8 bits;
</span><span class="sc0">                                    </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                                    </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc10">}</span><span class="sc0">
                            </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//print the last byte - pad right to make full byte
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">Close</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end compress()
</span>
</pre><div class="caption">Here we see the procedure for writing the original file to the compressed version. We 'pad' the last byte of the file for ease of decompression.</div>
        </div>
        <div class="space"></div>
        
        <h2>Decompression</h2>
        <p>
            The 'decompress' method of the Compressor class takes care of the decompression of the compressed file. The method expects two arguments, an input file
            which is the compressed binary file, and an output file that will be the decompressed text file. We use the FileStream class for handling file creation and reaading,
            while also wrapping these with a <a href="http://msdn.microsoft.com/en-us/library/system.io.streamwriter%28v=vs.110%29.aspx"target="_blank">StreamWriter</a> 
        for writing the decompressed file. We also use a <a href="http://msdn.microsoft.com/en-us/library/system.io.binaryreader%28v=vs.110%29.aspx"target="_blank">BinaryReader</a> 
        for reading the binary file.</p>
        <div class="codeBoxN">
            <pre>
                <span class="sc0">
        </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">decompress</span><span class="sc10">(</span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputFileName</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">outputFileName</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">FileInfo</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">FileInfo</span><span class="sc10">(</span><span class="sc11">outputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">FileInfo</span><span class="sc0"> </span><span class="sc11">inputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">FileInfo</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">inputStream</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputFile</span><span class="sc10">.</span><span class="sc11">OpenRead</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">outputStream</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">OpenWrite</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">StreamWriter</span><span class="sc0"> </span><span class="sc11">outputWriter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamWriter</span><span class="sc10">(</span><span class="sc11">outputStream</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">BinaryReader</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">BinaryReader</span><span class="sc10">(</span><span class="sc11">inputStream</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
            
            </span>
</pre><div class="caption">Here we see the creation of the file operation objects we will use during the 'decompress' method.</div>
        </div>
        <div class="smallSpace"></div>
        <p>
            We begin by reading the dictionary from the compressed file and forming a new List of 'Word' objects that we will use to decompress the file. The first byte of the 
            compressed file is the total number of pairs we should expect to follow, these pairs are the plain character followed by its code word length and finally the code word itself.
             We begin by reading the plain character as a byte and converting this to its string representation, we then take the code word length and divide by 8 to get the
            number of bytes we must read to get the entire code word. Once we know how many bytes to read, we then read and convert these bytes using the 
            <a href="http://msdn.microsoft.com/en-us/library/system.convert.tostring%28v=vs.110%29.aspx"target="_blank">Convert.ToString()</a> method which will
        convert our binary bytes into a binary string object. This returned string is used to read the code word from the compressed file. Each time a character is read
        from the compressed file, we create a new 'Word' object and add this to our List.</p>
        <div class="codeBoxN">
            <pre>
                <span class="sc2">//inputString used later for reading inputFile
</span><span class="sc0">            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">bitPadding</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">numOfPairs</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">totalPairs</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">numOfPairs</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">plainWordString</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">numOfPairs</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">plainWordString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">((</span><span class="sc16">char</span><span class="sc10">)</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">Read</span><span class="sc10">());</span><span class="sc0">
                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc2">//find amount of bytes to read for codeword
</span><span class="sc0">                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">bytesToRead</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//round up
</span><span class="sc0">                </span><span class="sc11">bytesToRead</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">bytesToRead</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">(),</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">.</span><span class="sc11">PadLeft</span><span class="sc10">(</span><span class="sc4">8</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc11">bytesToRead</span><span class="sc10">--;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//create and add our new Word to theWord List
</span><span class="sc0">                </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">plainWordString</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">numOfPairs</span><span class="sc10">--;</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//done while(numpairs &gt; 0) -done getting dictionary
</span>
</pre><div class="caption">Here we see the procedure for reading the dictionary from the compressed file.</div>
        </div>
        <div class="smallSpace"></div>
        <p>
            Once we have the dictionary we begin reading the original file back from the compressed binary file. This is accomplished by having a state variable, 'matched', which
            is a boolean value telling us whether the currently read byte has been matched. We read a byte from the compressed file while calling the Convert.ToString() to return
            the string representation of the byte. This returned string is checked for missing leading zeros and adjusted if needed, we then add this to our 'inputString' string which
            acts as a sort of buffer for us to read from. We then perform a matching procedure that will compare the 'inputString' to the dictionary and find our characters. Once
            a match is found, we write this character to the output file. This process is repeated until we reach the end of the binary file.
        </p>
        <div class="codeBoxN">
            <pre>
                <span class="sc2">//begin reading compressed file.
</span><span class="sc0">            </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">matched</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//while our stream has elements to read...
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">BaseStream</span><span class="sc10">.</span><span class="sc11">Position</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">BaseStream</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//setup 'matched' variable for matching strings
</span><span class="sc0">                </span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">while</span><span class="sc10">(!</span><span class="sc11">matched</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//need to 'try' this to catch unexpected EOF/ end of stream exceptions
</span><span class="sc0">                    </span><span class="sc5">try</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//get a byte
</span><span class="sc0">                        </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">(),</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Exception</span><span class="sc0"> </span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//CATCH EOF
</span><span class="sc0">                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//'normalize' our byte, we need leading zeros back for the code words
</span><span class="sc0">                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">PadLeft</span><span class="sc10">(</span><span class="sc4">8</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//add to inputString
</span><span class="sc0">                    </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//setup string for matching the codewords
</span><span class="sc0">                    </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//set to -1 for looping
</span><span class="sc0">                    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">matchPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//while !matched AND our inputString is longer than the min codeword length...
</span><span class="sc0">                    </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(!</span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">minCodeWordLength</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">matchPointer</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc5">try</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//we may 'run out' of characters in the inputString, catch this exception.....
</span><span class="sc0">                            </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">matchPointer</span><span class="sc10">];</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">   </span><span class="sc2">//we simply break and get more characters for the 'inputString'
</span><span class="sc0">                        </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Exception</span><span class="sc0"> </span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc2">//match the read strings to the dictionary string
</span><span class="sc0">                        </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">)</span><span class="sc0">
                            </span><span class="sc10">{</span><span class="sc0">
                                </span><span class="sc2">//write the found character
</span><span class="sc0">                                </span><span class="sc11">outputWriter</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc2">//remove this from the 'inpurString'
</span><span class="sc0">                                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc2">//reset for looping
</span><span class="sc0">                                </span><span class="sc11">matchPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc2">//end while (!matched &amp;&amp; inputString.Length &gt;= minCodeWordLength)
</span><span class="sc0">                </span><span class="sc10">}</span><span class="sc2">//end while(!matched)
</span><span class="sc0">            </span><span class="sc10">}</span><span class="sc2">//end while(binaryReader.BaseStream.Position != binaryReader.BaseStream.Length)
</span><span class="sc0">            </span><span class="sc2">//close our streams
</span><span class="sc0">            </span><span class="sc11">outputWriter</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">outputStream</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end decompress()
</span>
</pre><div class="caption">Here we see the procedure for reading the binary file and writing the decompressed file.</div>
        </div>
        <div class="space"></div>
        <h2>Conclusion</h2>
        <p>
            The program runs well with text files, I have not checked the program with any other sort of file. The program performed a compression of about 57% with the 
            text version of the US Constitution, from 44.9KB to 25.7KB. I would like to improve the matching procedure within the 'decompress' method as this is quite
            inefficient. 
        </p>
        
        <p style="text-align:center;"><a href="https://raw.githubusercontent.com/dusanders/dusanders.github.io/master/CSHARP/Source/FileCompression/Compressor.cs" target="_blank">Compressor.cs</a></p>
        <p style="text-align:center;"><a href="https://raw.githubusercontent.com/dusanders/dusanders.github.io/master/CSHARP/Source/FileCompression/RootedBinaryTree.cs" target="_blank">RootedBinaryTree.cs</a></p>
        <p style="text-align:center;"><a href="https://raw.githubusercontent.com/dusanders/dusanders.github.io/master/CSHARP/Source/FileCompression/Test.cs" target="_blank">Test.cs</a></p>
        <p style="text-align:center;"><a href="https://github.com/dusanders/dusanders.github.io/tree/master/CSHARP/Source/FileCompression/" target="_blank">Source Folder</a></p>
        <div id="footer">
            <div id="copyright">
                <p>Copyright &copy; 2015 Dustin Anderson</p>
            </div>
            <div id="aboutButton">
                <p><a href="../index.html">About</a></p>
            </div>
        </div>
    </div>
        <div id="sideBar">
            <ul id="sideBarList">
                <p style="text-align:center; text-decoration:underline;">Projects</p>
                <li class="sideBarItem" id="BluetoothRc"><a href="HashMap.html">HashMap Class</a></li>
                <li class="sideBarItem" style="color: #006600; cursor:default;">File Compression</li>
                <li class="sideBarItem"><a href="Game.html">Game Theory</a></li>
            </ul>
        </div>
        <div id="menuBar">
            <ul id="menuList">
                <li class="menuItem"><a href="../CPP/CPP.html">C++</a></li>
                <li class="menuItem" style="color: #80CC80;">C#</li>
                <li class="menuItem"><a href="../JAVA/Java.html">Java</a></li>
                <li class="menuItem"><a href="../ASM/ASM.html">Embedded Systems</a></li>
                <li class="menuItem"><a href="../ANDROID/AndroidHome.html">Android</a></li>
            </ul>
        </div>
    </div><!--end container-->
</body>
</html>
