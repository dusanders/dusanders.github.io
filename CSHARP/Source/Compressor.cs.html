<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
}
.sc1 {
	color: #008000;
}
.sc2 {
	color: #008000;
}
.sc4 {
	color: #FF8000;
}
.sc5 {
	font-weight: bold;
	color: #0000FF;
}
.sc6 {
	color: #808080;
}
.sc7 {
	color: #808080;
}
.sc10 {
	font-weight: bold;
	color: #000080;
}
.sc11 {
}
.sc16 {
	color: #8000FF;
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #FFFFFF; "><span class="sc1">/*Author:       Dustin Anderson
 * Title:           Compressor.cs
 * Desc:        This is intended to act as the Compressor/Decompressor class for compressing
 *                      files. RootedBinaryTree class is also required.
 */</span><span class="sc0">

</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">Collections</span><span class="sc10">.</span><span class="sc11">Generic</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">Linq</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">Text</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">Threading</span><span class="sc10">.</span><span class="sc11">Tasks</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">using</span><span class="sc0"> </span><span class="sc11">System</span><span class="sc10">.</span><span class="sc11">IO</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc5">namespace</span><span class="sc0"> </span><span class="sc11">FileCompression</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">class</span><span class="sc0"> </span><span class="sc11">Compressor</span><span class="sc0">
    </span><span class="sc10">{</span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">struct</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">plainWord</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">probability</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeWord</span><span class="sc10">;</span><span class="sc0">
        </span><span class="sc10">};</span><span class="sc0">

        </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">compress</span><span class="sc10">(</span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputFileName</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">outputFileName</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">char</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">char</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">double</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc16">double</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">StreamReader</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamReader</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0"> 
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">ReadLine</span><span class="sc10">())</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">Environment</span><span class="sc10">.</span><span class="sc11">NewLine</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">currentChar</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
                    </span><span class="sc11">totalCharacters</span><span class="sc10">++;</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(!(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Contains</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">)))</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">else</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc16">double</span><span class="sc0"> </span><span class="sc11">newCount</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">)];</span><span class="sc0">
                        </span><span class="sc11">newCount</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">));</span><span class="sc0">
                        </span><span class="sc11">characterCount</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">IndexOf</span><span class="sc10">(</span><span class="sc11">currentChar</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">newCount</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">Close</span><span class="sc10">();</span><span class="sc0">

            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc2">//initialize the List with a first element
</span><span class="sc0">            </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">].</span><span class="sc11">ToString</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterList</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">ToString</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">characterCount</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">totalCharacters</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//sort Words as we build the List
</span><span class="sc0">                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">probability</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">j</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">wordList</span><span class="sc10">.</span><span class="sc11">ToArray</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
            </span><span class="sc2">//form the huffman tree
</span><span class="sc0">            </span><span class="sc11">huffman</span><span class="sc10">(</span><span class="sc11">theWords</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc2">//get the output file
</span><span class="sc0">            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">File</span><span class="sc10">.</span><span class="sc11">OpenWrite</span><span class="sc10">(</span><span class="sc11">outputFileName</span><span class="sc10">);</span><span class="sc0">

            </span><span class="sc2">//print the dictionary to binary file
</span><span class="sc0">            </span><span class="sc16">byte</span><span class="sc0"> </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">stringPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//write total pairs
</span><span class="sc0">            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc2">//write code word
</span><span class="sc0">                </span><span class="sc16">byte</span><span class="sc0"> </span><span class="sc11">testByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">
                </span><span class="sc16">char</span><span class="sc0"> </span><span class="sc11">testChar</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">char</span><span class="sc10">)</span><span class="sc11">testByte</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]);</span><span class="sc0">
                </span><span class="sc2">//write code word length
</span><span class="sc0">                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">((</span><span class="sc16">byte</span><span class="sc10">)</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//write the code word
</span><span class="sc0">                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">byte</span><span class="sc10">)(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                        </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//pad the (end) of the last byte
</span><span class="sc0">                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">

            </span><span class="sc2">//print the document to binary file
</span><span class="sc0">            </span><span class="sc11">inputReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamReader</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//while we have a string to read
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc10">((</span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputReader</span><span class="sc10">.</span><span class="sc11">ReadLine</span><span class="sc10">())</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//for every character in inputString
</span><span class="sc0">                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">Environment</span><span class="sc10">.</span><span class="sc11">NewLine</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">&lt;</span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//find the correct Word object
</span><span class="sc0">                    </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">&lt;</span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">j</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//once we find the correct Word object
</span><span class="sc0">                        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">])</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//print the code word of the Word object
</span><span class="sc0">                            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc10">++)</span><span class="sc0">
                            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//shift our byte
</span><span class="sc0">                                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
                                </span><span class="sc2">//add our value
</span><span class="sc0">                                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">byte</span><span class="sc10">)(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">j</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">[</span><span class="sc11">w</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//write the byte once we hit 8 bits;
</span><span class="sc0">                                    </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
                                    </span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                                    </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc10">}</span><span class="sc0">
                            </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//print the last byte - pad right to make full byte
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">counter</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">writeByte</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">counter</span><span class="sc10">++;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">WriteByte</span><span class="sc10">(</span><span class="sc11">writeByte</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">Close</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end compress()
</span><span class="sc0">
        </span><span class="sc5">public</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">decompress</span><span class="sc10">(</span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputFileName</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">outputFileName</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">FileInfo</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">FileInfo</span><span class="sc10">(</span><span class="sc11">outputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">FileInfo</span><span class="sc0"> </span><span class="sc11">inputFile</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">FileInfo</span><span class="sc10">(</span><span class="sc11">inputFileName</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">inputStream</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputFile</span><span class="sc10">.</span><span class="sc11">OpenRead</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">FileStream</span><span class="sc0"> </span><span class="sc11">outputStream</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">outputFile</span><span class="sc10">.</span><span class="sc11">OpenWrite</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">StreamWriter</span><span class="sc0"> </span><span class="sc11">outputWriter</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">StreamWriter</span><span class="sc10">(</span><span class="sc11">outputStream</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">BinaryReader</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">BinaryReader</span><span class="sc10">(</span><span class="sc11">inputStream</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;();</span><span class="sc0">
            
            </span><span class="sc2">//inputString used later for reading inputFile
</span><span class="sc0">            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">bitPadding</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">numOfPairs</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">totalPairs</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">numOfPairs</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">plainWordString</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">numOfPairs</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">plainWordString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">((</span><span class="sc16">char</span><span class="sc10">)</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">Read</span><span class="sc10">());</span><span class="sc0">
                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc2">//find amount of bytes to read for codeword
</span><span class="sc0">                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">bytesToRead</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//round up
</span><span class="sc0">                </span><span class="sc11">bytesToRead</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">bytesToRead</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">(),</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">buf</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">buf</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">.</span><span class="sc11">PadLeft</span><span class="sc10">(</span><span class="sc4">8</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">buf</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc11">bytesToRead</span><span class="sc10">--;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">binaryString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">codeWordLength</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//create and add our new Word to theWord List
</span><span class="sc0">                </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">plainWordString</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">numOfPairs</span><span class="sc10">--;</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">binaryString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//done while(numpairs &gt; 0) -done getting dictionary
</span><span class="sc0">            </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">minCodeWordLength</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">totalPairs</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0">

            </span><span class="sc2">//begin reading compressed file.
</span><span class="sc0">            </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc16">bool</span><span class="sc0"> </span><span class="sc11">matched</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc2">//while our stream has elements to read...
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">BaseStream</span><span class="sc10">.</span><span class="sc11">Position</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">BaseStream</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//setup 'matched' variable for matching strings
</span><span class="sc0">                </span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">while</span><span class="sc10">(!</span><span class="sc11">matched</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//need to 'try' this to catch unexpected EOF/ end of stream exceptions
</span><span class="sc0">                    </span><span class="sc5">try</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//get a byte
</span><span class="sc0">                        </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Convert</span><span class="sc10">.</span><span class="sc11">ToString</span><span class="sc10">(</span><span class="sc11">binaryReader</span><span class="sc10">.</span><span class="sc11">ReadByte</span><span class="sc10">(),</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Exception</span><span class="sc0"> </span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//CATCH EOF
</span><span class="sc0">                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//'normalize' our byte, we need leading zeros back for the code words
</span><span class="sc0">                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">8</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">buffer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc10">.</span><span class="sc11">PadLeft</span><span class="sc10">(</span><span class="sc4">8</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">);</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//add to inputString
</span><span class="sc0">                    </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">buffer</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//setup string for matching the codewords
</span><span class="sc0">                    </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//set to -1 for looping
</span><span class="sc0">                    </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">matchPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc2">//while !matched AND our inputString is longer than the min codeword length...
</span><span class="sc0">                    </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(!</span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">minCodeWordLength</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">matchPointer</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc5">try</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//we may 'run out' of characters in the inputString, catch this exception.....
</span><span class="sc0">                            </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">[</span><span class="sc11">matchPointer</span><span class="sc10">];</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">   </span><span class="sc2">//we simply break and get more characters for the 'inputString'
</span><span class="sc0">                        </span><span class="sc5">catch</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Exception</span><span class="sc0"> </span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc2">//match the read strings to the dictionary string
</span><span class="sc0">                        </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">)</span><span class="sc0">
                            </span><span class="sc10">{</span><span class="sc0">
                                </span><span class="sc2">//write the found character
</span><span class="sc0">                                </span><span class="sc11">outputWriter</span><span class="sc10">.</span><span class="sc11">Write</span><span class="sc10">(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc2">//remove this from the 'inpurString'
</span><span class="sc0">                                </span><span class="sc11">inputString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">);</span><span class="sc0">
                                </span><span class="sc2">//reset for looping
</span><span class="sc0">                                </span><span class="sc11">matchPointer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc11">matcherString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
                                </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                        </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">inputString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc11">matched</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc2">//end while (!matched &amp;&amp; inputString.Length &gt;= minCodeWordLength)
</span><span class="sc0">                </span><span class="sc10">}</span><span class="sc2">//end while(!matched)
</span><span class="sc0">            </span><span class="sc10">}</span><span class="sc2">//end while(binaryReader.BaseStream.Position != binaryReader.BaseStream.Length)
</span><span class="sc0">            </span><span class="sc2">//close our streams
</span><span class="sc0">            </span><span class="sc11">outputWriter</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">outputStream</span><span class="sc10">.</span><span class="sc11">Dispose</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end decompress()
</span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">huffman</span><span class="sc10">(</span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;&gt;</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">List</span><span class="sc10">&lt;</span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;&gt;();</span><span class="sc0">
            </span><span class="sc2">//make our initial list of binary trees
</span><span class="sc0">            </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Add</span><span class="sc10">(</span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;(</span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]));</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//combine trees
</span><span class="sc0">            </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">Word</span><span class="sc0"> </span><span class="sc11">newWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//combine the probabilities
</span><span class="sc0">                </span><span class="sc11">newWord</span><span class="sc10">.</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//make a new tree for the combined trees.
</span><span class="sc0">                </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTrees</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;(</span><span class="sc11">newWord</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">combineTrees</span><span class="sc10">(</span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">));</span><span class="sc0">
                </span><span class="sc2">//make sure we are at root
</span><span class="sc0">                </span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">toRoot</span><span class="sc10">();</span><span class="sc0">
                </span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">newTreeIndex</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc2">//insert tree
</span><span class="sc0">                </span><span class="sc5">while</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc11">combinedTrees</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc10">).</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">probability</span><span class="sc10">))</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc2">//did we reach the end?
</span><span class="sc0">                    </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Count</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc11">newTreeIndex</span><span class="sc10">++;</span><span class="sc0">
                        </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc2">//if not, keep looping until we find our insert point
</span><span class="sc0">                    </span><span class="sc11">newTreeIndex</span><span class="sc10">++;</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//insert tree
</span><span class="sc0">                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">Insert</span><span class="sc10">(</span><span class="sc11">newTreeIndex</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTrees</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">RemoveAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//end while( &gt;1)
</span><span class="sc0">            </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">).</span><span class="sc11">toRoot</span><span class="sc10">();</span><span class="sc0">
            </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">treeArray</span><span class="sc10">.</span><span class="sc11">ElementAt</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc2">//end huffman()
</span><span class="sc0">
        </span><span class="sc5">private</span><span class="sc0"> </span><span class="sc16">static</span><span class="sc0"> </span><span class="sc16">void</span><span class="sc0"> </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc16">string</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Word</span><span class="sc10">[]</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">RootedBinaryTree</span><span class="sc10">&lt;</span><span class="sc11">Word</span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">)</span><span class="sc0">
        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//if we can go left...
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveLeft</span><span class="sc10">())</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//adjust codeword string accordingly...
</span><span class="sc0">                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc7">'0'</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//if we have a character here....
</span><span class="sc0">                    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//find the character in our 'theWords' array...
</span><span class="sc0">                        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">   </span><span class="sc2">//label this character with a codeword string
</span><span class="sc0">                            </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc2">//recusive call
</span><span class="sc0">                </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc2">//back from recursion, remove a character from our codeword string
</span><span class="sc0">                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc2">//end if(combinedTree.moveLeft())
</span><span class="sc0">            </span><span class="sc2">//do the same for right sides....
</span><span class="sc0">            </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveRight</span><span class="sc10">())</span><span class="sc0">
            </span><span class="sc10">{</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc7">'1'</span><span class="sc10">;</span><span class="sc0">
                </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc5">null</span><span class="sc10">)</span><span class="sc0">
                </span><span class="sc10">{</span><span class="sc0">
                    </span><span class="sc5">for</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc16">int</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
                    </span><span class="sc10">{</span><span class="sc0">
                        </span><span class="sc5">if</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">getData</span><span class="sc10">().</span><span class="sc11">plainWord</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">plainWord</span><span class="sc10">)</span><span class="sc0">
                        </span><span class="sc10">{</span><span class="sc0">
                            </span><span class="sc11">theWords</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">].</span><span class="sc11">codeWord</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">;</span><span class="sc0">
                            </span><span class="sc5">break</span><span class="sc10">;</span><span class="sc0">
                        </span><span class="sc10">}</span><span class="sc0">
                    </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc10">}</span><span class="sc0">
                </span><span class="sc11">assignCodes</span><span class="sc10">(</span><span class="sc5">ref</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">theWords</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">combinedTree</span><span class="sc10">);</span><span class="sc0">
                </span><span class="sc11">codeString</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Remove</span><span class="sc10">(</span><span class="sc11">codeString</span><span class="sc10">.</span><span class="sc11">Length</span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
            </span><span class="sc10">}</span><span class="sc0">
            </span><span class="sc2">//explored all possibilities, move back up....
</span><span class="sc0">            </span><span class="sc11">combinedTree</span><span class="sc10">.</span><span class="sc11">moveUp</span><span class="sc10">();</span><span class="sc0">
        </span><span class="sc10">}</span><span class="sc0">
    </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span></div></body>
</html>
